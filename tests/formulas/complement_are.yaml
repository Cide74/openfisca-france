- name: Test 01 - Vérifie le calcul du complément ARE dans un cas avec salaire de reprise proche du salaire journalier de référence
  period: 2022-04
  input:
    salaire_de_base: 1200
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 37
    salaire_journalier_reference_are: 48
  output:
    complement_are_nombre_jours_indemnises: 7.0
    complement_are_allocation_mensuelle_due_brute: 259
    complement_are_deductions_montant_mensuel: 10.08
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 248.92

- name: Test 02 - Vérifie le calcul du complément ARE dans un cas avec salaire de reprise bas par rapport au salaire journalier de référence
  period: 2022-04
  input:
    salaire_de_base: 375
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 37
    salaire_journalier_reference_are: 45
  output:
    complement_are_nombre_jours_indemnises: 23
    complement_are_allocation_mensuelle_due_brute: 851.00
    complement_are_deductions_montant_mensuel: 31.05
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 819.95

- name: Test 03 - Vérifie le calcul du complément ARE dans un cas de reprise d'emploi avec salaire supérieur au salaire de référence
  period: 2022-04
  input:
    salaire_de_base: 1800
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 35.71
    salaire_journalier_reference_are: 58.38
  output:
    complement_are_nombre_jours_indemnises: 0
    complement_are_allocation_mensuelle_due_brute: 0

- name: Test 04 - Vérifie le calcul du complément ARE dans un cas simple sans déductions de charges
  period: 2022-04
  input:
    salaire_de_base: 210
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 27.72
    salaire_journalier_reference_are: 48.63
  output:
    complement_are_nombre_jours_indemnises: 25
    complement_are_allocation_mensuelle_due_brute: 693
    complement_are_deductions_montant_mensuel: 0
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 693

- name: Test 05 - Vérifie le calcul du complément ARE dans un cas simple avec haut salaire journalier de référence
  period: 2022-04
  input:
    salaire_de_base: 1200
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 118.10
    salaire_journalier_reference_are: 207.20
  output:
    complement_are_nombre_jours_indemnises: 23
    complement_are_allocation_mensuelle_due_brute: 2716.30
    complement_are_deductions_montant_mensuel: 312.57
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 2403.73

- name: Test 06 - Vérifie le calcul du complément ARE dans un cas simple avec dégressivité ARE
  period: 2022-05
  input:
    salaire_de_base: 1200
    degressivite_are: true
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 82.67
    allocation_retour_emploi_journaliere_taux_plein: 118.10
    salaire_journalier_reference_are: 207.20
  output:
    complement_are_nombre_jours_indemnises: 24
    complement_are_allocation_mensuelle_due_brute: 1984.08
    complement_are_crc_mensuelle: 149.28
    complement_are_csg_mensuelle: 111.84
    complement_are_crds_mensuelle: 9.12
    complement_are_deductions_montant_mensuel: 270.24
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 1713.84

- name: Test 07 - Vérifie le calcul du complément ARE pour un mois de 28 jours
  period: 2022-02
  input:
    salaire_de_base: 918
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 35.11
    salaire_journalier_reference_are: 56.91
  output:
    complement_are_nombre_jours_indemnises: 10
    complement_are_deductions_montant_mensuel: 17.1
    complement_are_allocation_mensuelle_due_brute: 351.1
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 334

- name: Test 08 - Vérifie le calcul du complément ARE pour un mois de 29 jours
  period: 2024-02
  input:
    salaire_de_base: 918
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 35.11
    salaire_journalier_reference_are: 56.91
  output:
    complement_are_nombre_jours_indemnises: 11
    complement_are_allocation_mensuelle_due_brute: 386.21
    complement_are_deductions_montant_mensuel: 18.81
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 367.4

- name: Test 09 - Vérifie le calcul du complément ARE pour un mois de 30 jours
  period: 2022-04
  input:
    salaire_de_base: 918
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 35.11
    salaire_journalier_reference_are: 56.91
  output:
    complement_are_nombre_jours_indemnises: 12
    complement_are_allocation_mensuelle_due_brute: 421.32
    complement_are_deductions_montant_mensuel: 20.52
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 400.8

- name: Test 10 - Vérifie le calcul du complément ARE pour un mois de 31 jours
  period: 2022-03
  input:
    salaire_de_base: 918
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 35.11
    salaire_journalier_reference_are: 56.91
  output:
    complement_are_nombre_jours_indemnises: 13
    complement_are_allocation_mensuelle_due_brute: 456.43
    complement_are_deductions_montant_mensuel: 22.23
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 434.20

- name: Test 11 - Vérifie le calcul du complément ARE dans un cas de dépassement du plafond de cumul
  period: 2022-04
  input:
    salaire_de_base: 846
    degressivite_are: false
    complement_are_nombre_jours_restants: 100
    allocation_retour_emploi_journaliere: 22.5
    salaire_journalier_reference_are: 30
  output:
    complement_are_nombre_jours_indemnises: 3
    complement_are_allocation_mensuelle_due_brute: 67.5
    complement_are_deductions_montant_mensuel: 0
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 67.5

- name: Test 12 - Vérifie le calcul du complément ARE partiel dans le cas où le nombre de jours restants n'est pas suffisant
  period: 2022-04
  input:
    salaire_de_base: 1200
    degressivite_are: false
    complement_are_nombre_jours_restants: 4
    allocation_retour_emploi_journaliere: 37
    salaire_journalier_reference_are: 48
  output:
    complement_are_nombre_jours_indemnisables: 7
    complement_are_nombre_jours_indemnises: 4
    complement_are_allocation_mensuelle_due_brute: 148
    complement_are_deductions_montant_mensuel: 10.08
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 137.92

- name: Test 13 - Vérifie le calcul du complément ARE partiel dans un cas sans jours restants
  period: 2022-04
  input:
    salaire_de_base: 1200
    degressivite_are: false
    complement_are_nombre_jours_restants: 0
    allocation_retour_emploi_journaliere: 37
    salaire_journalier_reference_are: 48
  output:
    complement_are_nombre_jours_indemnisables: 7
    complement_are_nombre_jours_indemnises: 0
    complement_are_allocation_mensuelle_due_brute: 0
    complement_are_deductions_montant_mensuel: 10.08
    complement_are_allocation_mensuelle_due_brute_apres_deductions: 0

- name: Test 14 - Vérifie le calcul du nombre de jours restants
  period: 2022-04
  input:
    salaire_de_base: 1200
    degressivite_are: false
    complement_are_nombre_jours_restants: 10
    allocation_retour_emploi_journaliere: 37
    salaire_journalier_reference_are: 48
  output:
    complement_are_nombre_jours_restants: 10
    complement_are_nombre_jours_indemnisables: 7
    complement_are_nombre_jours_restants_fin_periode: 3

- name: Test 15 - Vérifie le calcul du complément ARE pour plusieurs individus
  period: 2022-04
  input:
    individus:
      parent1:
        salaire_de_base: 1200
        degressivite_are: false
        complement_are_nombre_jours_restants: 100
        allocation_retour_emploi_journaliere: 37
        salaire_journalier_reference_are: 48
      parent2:
        salaire_de_base: 375
        degressivite_are: false
        complement_are_nombre_jours_restants: 100
        allocation_retour_emploi_journaliere: 37
        salaire_journalier_reference_are: 45
  output:
    individus:
      parent1:
        complement_are_nombre_jours_indemnises: 7.0
        complement_are_allocation_mensuelle_due_brute: 259
        complement_are_deductions_montant_mensuel: 10.08
        complement_are_allocation_mensuelle_due_brute_apres_deductions: 248.92
      parent2:
        complement_are_nombre_jours_indemnises: 23
        complement_are_allocation_mensuelle_due_brute: 851.00
        complement_are_deductions_montant_mensuel: 31.05
        complement_are_allocation_mensuelle_due_brute_apres_deductions: 819.95

- name: Test 16 - Vérifie le calcul du complément ARE dans un cas sur plusieurs périodes différentes
  input:
    salaire_de_base:
        2022-02: 918
        2022-03: 918
        2022-04: 918
    degressivite_are:
        2022-02: false
        2022-03: false
        2022-04: false
    complement_are_nombre_jours_restants:
        2022-02: 100
    allocation_retour_emploi_journaliere:
        2022-02: 35.11
        2022-03: 35.11
        2022-04: 35.11
    salaire_journalier_reference_are:
        2022-02: 56.91
        2022-03: 56.91
        2022-04: 56.91
  output:
    complement_are_nombre_jours_restants:
        2022-02: 100
        2022-03: 90
        2022-04: 77
    complement_are_nombre_jours_indemnises:
        2022-02: 10
        2022-03: 13
        2022-04: 12
    complement_are_allocation_mensuelle_due_brute:
        2022-02: 351.1
        2022-03: 456.43
        2022-04: 421.32
    complement_are_deductions_montant_mensuel:
        2022-02: 17.1
        2022-03: 22.23
        2022-04: 20.52
    complement_are_allocation_mensuelle_due_brute_apres_deductions:
        2022-02: 334
        2022-03: 434.20
        2022-04: 400.8
