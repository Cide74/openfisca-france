- period: "2012"
  name: "RSA célibataire, retrait_brute = 1500 * 12"
  relative_error_margin: 0.01
  input_variables:
    date_naissance: "1945-01-01"  # 67 ans
    retraite_brute:
      2010-01: 1500
      2010-02: 1500
      2010-03: 1500
      2010-04: 1500
      2010-05: 1500
      2010-06: 1500
      2010-07: 1500
      2010-08: 1500
      2010-09: 1500
      2010-10: 1500
      2010-11: 1500
      2010-12: 1500
      2011-01: 1500
      2011-02: 1500
      2011-03: 1500
      2011-04: 1500
      2011-05: 1500
      2011-06: 1500
      2011-07: 1500
      2011-08: 1500
      2011-09: 1500
      2011-10: 1500
      2011-11: 1500
      2011-12: 1500
      2012-01: 1500
      2012-02: 1500
      2012-03: 1500
      2012-04: 1500
      2012-05: 1500
      2012-06: 1500
      2012-07: 1500
      2012-08: 1500
      2012-09: 1500
      2012-10: 1500
      2012-11: 1500
      2012-12: 1500
    rpns_individu:
      2010: 0
      2011: 0
      2012: 0
    statut_occupation_logement:
      "2012-01": proprietaire  # Propriétaire (non accédant) du logement
  output_variables:
    revenus_nets_du_travail:
      2012: 0
    pensions_nettes:
      2012: 16812
    revenus_nets_du_capital:
      2012: 0
    # start prestations_sociales
    aspa:
      2012-01: 0
    minima_sociaux:
      2012: 0
    prestations_sociales:
      2012: 0
    # end prestations_sociales
    ppe:
      2012: 0
    impots_directs:
      2012: -528
    revenu_disponible:
      2012: 16812 - 528
    aides_logement:
      "2012": 0

- period: "2012"
  name: "RSA célibataire, f2ee = 1500 * 12"
  input_variables:
    date_naissance: "1945-01-01"  # 67 ans
    f2ee:
      2010: 1500 * 12
      2011: 1500 * 12
      2012: 1500 * 12
    rpns_individu:
      2010: 0
      2011: 0
      2012: 0
    statut_occupation_logement:
      "2012-01": proprietaire
  output_variables:
    revenus_nets_du_travail:
      2012: 0
    pensions_nettes:
      2012: 0
    # start revenus_nets_du_capital
    revenus_capitaux_prelevement_bareme:
      2012-01: 0
    revenus_capitaux_prelevement_liberatoire:
      2012-01: 1500
    prelevements_sociaux_revenus_capital:
    # TODO si haut je pensais plutôt à 15.5 ?
      2012: -12 * 1500 * 0.175
    prelevement_forfaitaire_liberatoire:
      2012: -12 * 1500 * 0.24
    revenus_nets_du_capital:
      2012: 14850
    # start prestations_sociales
    aspa:
      2012-01: 0
    minima_sociaux:
      2012: 0
    prestations_sociales:
      2012: 0
    # end prestations_sociales
    ppe:
      2012: 0
    impots_directs:
      2012: -4320
    revenu_disponible:
      2012: 10530
    aides_logement:
      "2012": 0

- period: "2012"
  name: "RSA célibataire, f2dc = 1500 * 12"
  relative_error_margin: 0.001
  input_variables:
    date_naissance: "1945-01-01"  # 67 ans
    f2dc:
      2010: 2500 * 12
      2011: 2500 * 12
      2012: 2500 * 12
    rpns_individu:
      2010: 0
      2011: 0
      2012: 0
    statut_occupation_logement:
      "2012-01": proprietaire
  output_variables:
    revenus_nets_du_travail:
      2012: 0
    pensions_nettes:
      2012: 0
    # start revenus_nets_du_capital
    revenus_capitaux_prelevement_bareme:
      2012-01: 2500
    revenus_capitaux_prelevement_liberatoire:
      2012-01: 0
    prelevements_sociaux_revenus_capital:
    # TODO si haut je pensais plutôt à 15.5 ?
      2012: -12 * 2500 * 0.175
    prelevement_forfaitaire_liberatoire:
      2012: 0
    revenus_nets_du_capital:
      2012: 2500 * 12 * (1 - 0.175)
    # start prestations_sociales
    aspa:
      2012-01: 0
    minima_sociaux:
      2012: 0
    prestations_sociales:
      2012: 0
    # end prestations_sociales
    ppe:
      2012: 0
    impots_directs:
      2012: -1019
    revenu_disponible:
      2012: 2500 * 12 * (1 - 0.175) - 1019
    aides_logement:
      "2012": 0

- name: f1aw_f4ba_2017
  description: "Revenus fonciers (4BA) et rentes viagères à titre onéreux (1AW), 2017 (vérifie notamment la formule de revenus_nets_du_capital qui est un peu complexe pour ces deux types de revenu)"
  period: 2017
  absolute_error_margin: 1
  input_variables:
    f1aw: 30000
    f4ba: 20000
  output_variables:
    prelevements_sociaux_revenus_capital: -7052 # -(0.7*30000 + 20000) * (0.045 + 0.02 + 0.003 + 0.005 + 0.082)
    revenus_nets_du_capital: (20000 - 7052)
    pensions_nettes: 30000
    irpp: -6593 # Montant calculé sur le simulateur de la DGFiP
    impots_directs: -6593 # Montant calculé sur le simulateur de la DGFiP
    revenu_disponible: (20000 - 7052) + 30000 - 6593

- name: acomptes_ir_2016
  description: "Montant d'impôt et revenu disponible en cas d'acomptes pour l'IR en 2016 (prélèvement forfaitaire non libératoire et acomptes pour élus locaux). Attention, on n'a pas regardé les cotisations sociales et donc, on ne teste pas revenu_disponible ici...'"
  period: 2016
  absolute_error_margin: 1
  input_variables:
    f2ck: 10000
    f8th: 3000
    f2dc: 100000
    salaire_imposable: 25000
  output_variables:
    acomptes_ir: 13000
    revenus_nets_du_capital: 100000*(1-(0.045+0.02+0.003+0.005+0.082))
    irpp: -7266 # Montant calculé sur le simulateur de la DGFiP
    impots_directs: -7266-13000
    #revenu_disponible: ???

- name: acomptes_ir_2017
  description: "Montant d'impôt et revenu disponible en cas d'acomptes pour l'IR en 2017 (prélèvement forfaitaire non libératoire)"
  period: 2017
  absolute_error_margin: 1
  input_variables:
    f2ck: 10000
    f2dc: 100000
  output_variables:
    prelevement_forfaitaire_non_liberatoire: 10000
    acomptes_ir: 10000
    revenus_nets_du_capital: 100000*(1-(0.045+0.02+0.003+0.005+0.099))
    irpp: -2293 # Montant calculé sur le simulateur de la DGFiP
    impots_directs: -(2293+10000)
    revenu_disponible: 100000*(1-(0.045+0.02+0.003+0.005+0.099))-(2293+10000)

- name: plues_values_immobilières_2017
  description: "Montant d'impôt et revenu disponible pour les plus-values immobilières (3VZ)"
  period: 2017
  absolute_error_margin: 1
  input_variables:
    f3vz: 100000
  output_variables:
    prelevements_sociaux_revenus_capital: -100000*(0.045+0.02+0.003+0.005+0.099)
    revenus_nets_du_capital: 100000*(1-(0.045+0.02+0.003+0.005+0.099))
    ir_pv_immo: -0.19*100000
    irpp: 0
    impots_directs: -0.19*100000
    #revenu_disponible: 100000*(1-(0.19+0.045+0.02+0.003+0.005+0.099))

